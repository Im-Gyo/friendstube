<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VideoRoom</title>
    
    <link rel="stylesheet" href="/css/custom.css">
    <script type="text/javascript" src="/js/socket.io.js"></script> 
    <script type="text/javascript" src="/js/jquery-3.6.0.min.js"></script>       
    <!-- <script type="text/javascript" src="src/js/bootstrap.min.js"></script> -->
</head>
<header>
    <div class="logo">
        <img src="/img/로고.png">
        <img class="quest" src="/img/물음표.png">
    </div>
</header>

<body bgcolor="#353535">
    <table class="mainTable" border="1">
        <th style="width: 80%;">
            asdasd
        </th>
        <th>
            <div calss="chatRoom">
                <section class="chatbox">
                  <section class="chat-window">
                    <article class="msg-container msg-remote" id="msg-0">
                      <div class="msg-box">
                        <img class="user-img" id="user-0" src="" />
                        <div class="flr">
                          <div class="messages">
                            <p class="msg" id="msg-0">
                              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent varius, neque non tristique tincidunt, mauris nunc efficitur erat, elementum semper justo odio id nisi.
                            </p>
                          </div>
                          <span class="timestamp"><span class="username">Name</span>&bull;<span class="posttime">3 minutes ago</span></span>
                        </div>
                      </div>
                    </article>
                    <article class="msg-container msg-remote" id="msg-0">
                        <div class="msg-box">
                          <img class="user-img" id="user-0" src="" />
                          <div class="flr">
                            <div class="messages">
                              <p class="msg" id="msg-0">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent varius, neque non tristique tincidunt, mauris nunc efficitur erat, elementum semper justo odio id nisi.
                              </p>
                            </div>
                            <span class="timestamp"><span class="username">Name</span>&bull;<span class="posttime">3 minutes ago</span></span>
                          </div>
                        </div>
                      </article>
                      <article class="msg-container msg-remote" id="msg-0">
                        <div class="msg-box">
                          <img class="user-img" id="user-0" src="" />
                          <div class="flr">
                            <div class="messages">
                              <p class="msg" id="msg-0">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent varius, neque non tristique tincidunt, mauris nunc efficitur erat, elementum semper justo odio id nisi.
                              </p>
                            </div>
                            <span class="timestamp"><span class="username">Name</span>&bull;<span class="posttime">3 minutes ago</span></span>
                          </div>
                        </div>
                      </article>
                      <article class="msg-container msg-remote" id="msg-0">
                        <div class="msg-box">
                          <img class="user-img" id="user-0" src="" />
                          <div class="flr">
                            <div class="messages">
                              <p class="msg" id="msg-0">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent varius, neque non tristique tincidunt, mauris nunc efficitur erat, elementum semper justo odio id nisi.
                              </p>
                            </div>
                            <span class="timestamp"><span class="username">Name</span>&bull;<span class="posttime">3 minutes ago</span></span>
                          </div>
                        </div>
                      </article>
                      <article class="msg-container msg-remote" id="msg-0">
                        <div class="msg-box">
                          <img class="user-img" id="user-0" src="" />
                          <div class="flr">
                            <div class="messages">
                              <p class="msg" id="msg-0">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent varius, neque non tristique tincidunt, mauris nunc efficitur erat, elementum semper justo odio id nisi.
                              </p>
                            </div>
                            <span class="timestamp"><span class="username">Name</span>&bull;<span class="posttime">3 minutes ago</span></span>
                          </div>
                        </div>
                      </article>
                    <article class="msg-container msg-self" id="msg-0">
                      <div class="msg-box">
                        <div class="flr">
                          <div class="messages">
                            <p class="msg" id="msg-1">
                              Lorem ipsum dolor sit amet
                            </p>                            
                          </div>
                          <span class="timestamp"><span class="username">Name</span>&bull;<span class="posttime">2 minutes ago</span></span>
                        </div>
                        <img class="user-img" id="user-0" src="" />
                      </div>
                    </article>
                    <article class="msg-container msg-remote" id="msg-0">
                      <div class="msg-box">
                        <img class="user-img" id="user-0" src="" />
                        <div class="flr">
                          <div class="messages">
                            <p class="msg" id="msg-0">
                              Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                            </p>
                          </div>
                          <span class="timestamp"><span class="username">Name</span>&bull;<span class="posttime">1 minute ago</span></span>
                        </div>
                      </div>
                    </article>
                    <article class="msg-container msg-remote" id="msg-0">
                      <div class="msg-box">
                        <img class="user-img" id="user-0" src="" />
                        <div class="flr">
                          <div class="messages">
                            <p class="msg" id="msg-0">
                              Lorem ipsum dolor sit amet.
                            </p>
                          </div>
                          <span class="timestamp"><span class="username">Name</span>&bull;<span class="posttime">Now</span></span>
                        </div>
                      </div>
                    </article>
                    <article class="msg-container msg-self" id="msg-0">
                      <div class="msg-box">
                        <div class="flr">
                          <div class="messages">
                            <p class="msg" id="msg-1">
                              Lorem ipsum
                            </p>
                          </div>
                          <span class="timestamp"><span class="username">Name</span>&bull;<span class="posttime">Now</span></span>
                        </div>
                        <img class="user-img" id="user-0" src="" />
                      </div>
                    </article>
                  </section>
                  <form class="chat-input" onsubmit="return false;">
                    <input type="text" autocomplete="on" placeholder="Type a message" />
                    <button>
                        <svg style="width:24px;height:24px" viewBox="0 0 24 24"><path fill="rgba(0,0,0,.38)" d="M17,12L12,17V14H8V10H12V7L17,12M21,16.5C21,16.88 20.79,17.21 20.47,17.38L12.57,21.82C12.41,21.94 12.21,22 12,22C11.79,22 11.59,21.94 11.43,21.82L3.53,17.38C3.21,17.21 3,16.88 3,16.5V7.5C3,7.12 3.21,6.79 3.53,6.62L11.43,2.18C11.59,2.06 11.79,2 12,2C12.21,2 12.41,2.06 12.57,2.18L20.47,6.62C20.79,6.79 21,7.12 21,7.5V16.5M12,4.15L5,8.09V15.91L12,19.85L19,15.91V8.09L12,4.15Z" /></svg>
                    </button>
                  </form>
                </section>
            </div>
        </th>
    </table>
    <select>
        <option value="Room1">Room1</option>
        <option value="Room2">Room2</option>
      </select>
      <ul id="messages"></ul>
      <form action="">
        <input id="m" autocomplete="off"/>
        <button>Send</button>
      </form>
</body>
<script>
    $('.chat-input input').keyup(function(e) {
    if ($(this).val() == '')
        $(this).removeAttr('good');
    else
        $(this).attr('good', '');
    });

    $(() => {
    const name = prompt('What your name');
    const socket = io();
    let room = ['room1', 'room2'];
    let num = 0;

    socket.emit('joinRoom', num, name);

    $('select').change(() => {        
      socket.emit('leaveRoom', num, name);
      num++;
      num = num % 2;
      socket.emit('joinRoom', num, name);
    });


    $('form').submit(() => {
      socket.emit('chat message', num, name, $('#m').val());
      $('#m').val('');
      return false;
    });

    socket.on('chat message', (name, msg) => {
      $('#messages').append($('<li>').text(name + '  :  ' +
        msg));
    });

    socket.on('leaveRoom', (num, name) => {
      $('#messages').append($('<li>').text(name + '    leaved ' + room[num] + ' :('));
    });

    socket.on('joinRoom', (num, name) => {        
      $('#messages').append($('<li>').text(name + '    joined ' + room[num] + ':)'));
    });
  });

    // function namespace(nsp) {
    //     const namespace = io('/namespace' + nsp);        
    //       // news라는 이벤트를 받을 시 콘솔에 data.hello를 출력
    //       namespace.on('news', (data) => {
    //       console.log(data.hello);
    //     });
    // }

    // $(() => {
    //     const socket = io();
    //     $('form').submit(() => {
    //       socket.emit('message', $('#m').val());
    //       $('#m').val('');
    //       return false;
    //     });

    //     socket.on('message', (msg) => {
    //       $('#messages').append($('<li>').text(msg));
    //     });
    // });
</script>
</html>